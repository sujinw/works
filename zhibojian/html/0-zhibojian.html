<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
	<meta charset='utf-8' />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
	<meta name="description" content="不超过150个字符"/>
	<meta name="keywords" content=""/>
	<meta name="author" content="slade, sujinw@qq.com"/>
	<!-- 为移动设备添加 viewport -->
	<meta name="viewport" content="initial-scale=1, maximum-scale=3, minimum-scale=1, user-scalable=no" />

	<!-- iOS 设备 begin -->
	<meta name="apple-mobile-web-app-title" content="标题" />
	<!-- 添加到主屏后的标题（iOS 6 新增） -->
	<meta name="apple-mobile-web-app-capable" content="yes"/>
	<!-- 是否启用 WebApp 全屏模式，删除苹果默认的工具栏和菜单栏 -->

	<meta name="apple-itunes-app" content="app-id=myAppStoreID, affiliate-data=myAffiliateData, app-argument=myURL" />
	<!-- 添加智能 App 广告条 Smart App Banner（iOS 6+ Safari） -->
	<meta name="apple-mobile-web-app-status-bar-style" content="black"/>
	<!-- 设置苹果工具栏颜色 -->
	<meta name="format-detection" content="telphone=no, email=no"/>
	<!-- 忽略页面中的数字识别为电话，忽略email识别 -->
	<!-- 启用360浏览器的极速模式(webkit) -->
	<meta name="renderer" content="webkit" />
	<!-- 避免IE使用兼容模式 -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<!-- 不让百度转码 -->
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<!-- 针对手持设备优化，主要是针对一些老的不识别viewport的浏览器，比如黑莓 -->
	<!-- uc强制竖屏 -->
	<meta name="screen-orientation" content="portrait" />
	<!-- QQ强制竖屏 -->
	<meta name="x5-orientation" content="portrait" />
	<!-- windows phone 点击无高光 -->
	<meta name="msapplication-tap-highlight" content="no" />

	<link rel="stylesheet" type="text/css" href="css/reset.css" />
	<link rel="stylesheet" type="text/css" href="css/content.css">
	
	<!-- load javascript -->
<script type="text/javascript" src="js/zepto.js"></script>
<script type="text/javascript" src="js/dropload.js"></script>
	<title>直播间</title>
	<style type="text/css">
		.dropload-up,.dropload-down{
    position: relative;
    height: 0;
    overflow: hidden;
    font-size: 12px;
    /* 开启硬件加速 */
    -webkit-transform:translateZ(0);
    transform:translateZ(0);
}
.dropload-down{
    height: 50px;
}
.dropload-refresh,.dropload-update,.dropload-load,.dropload-noData{
    height: 50px;
    line-height: 50px;
    text-align: center;
}
.dropload-load .loading{
    display: inline-block;
    height: 15px;
    width: 15px;
    border-radius: 100%;
    margin: 6px;
    border: 2px solid #666;
    border-bottom-color: transparent;
    vertical-align: middle;
    -webkit-animation: rotate 0.75s linear infinite;
    animation: rotate 0.75s linear infinite;
}
@-webkit-keyframes rotate {
    0% {
        -webkit-transform: rotate(0deg);
    }
    50% {
        -webkit-transform: rotate(180deg);
    }
    100% {
        -webkit-transform: rotate(360deg);
    }
}
@keyframes rotate {
    0% {
        transform: rotate(0deg);
    }
    50% {
        transform: rotate(180deg);
    }
    100% {
        transform: rotate(360deg);
    }
}
	</style>
</head>
<body>
	<!-- 
box				包含最外层公共的样式
container		最外层的容器
warrp			功能容器
content			居中 -->
	<!-- page container bengin -->
	<div class="page-container" id="wrapper">
		<div>
			<!-- famous teacher bengin -->
		<section class="famous-teacher box">
			<div class="section-title">
				<h3>名师风采</h3>
			</div>
			<div class="section-list-warrp" style="height:120px;">
				<ul class="section-list">
					<li>
						<a href="#">
							<img src="images/tx.png" alt="名师1" />
							<p class="teacher-name">稻田</p>
						</a>
					</li>
					<li>
						<a href="#">
							<img src="images/tx.png" alt="名师1" />
							<p class="teacher-name">稻田</p>
						</a>
					</li>
					<li>
						<a href="#">
							<img src="images/tx.png" alt="名师1" />
							<p class="teacher-name">稻田</p>
						</a>
					</li>
					<li>
						<a href="#">
							<img src="images/tx.png" alt="名师1" />
							<p class="teacher-name">稻田</p>
						</a>
					</li>
					<li>
						<a href="#">
							<img src="images/tx.png" alt="名师1" />
							<p class="teacher-name">稻田</p>
						</a>
					</li>
					<li>
						<a href="#">
							<img src="images/tx.png" alt="名师1" />
							<p class="teacher-name">稻田</p>
						</a>
					</li>
					<li>
						<a href="#">
							<img src="images/tx.png" alt="名师1" />
							<p class="teacher-name">稻田</p>
						</a>
					</li>
					<li>
						<a href="#">
							<img src="images/tx.png" alt="名师1" />
							<p class="teacher-name">稻田</p>
						</a>
					</li>
					<li>
						<a href="#">
							<img src="images/tx.png" alt="名师1" />
							<p class="teacher-name">稻田</p>
						</a>
					</li>
				</ul>
				<div class="clearfix"></div>
				<a href="javascript:;" id="btn-to-left"></a>
			</div>
		</section>
		<!-- teacher -end -->
		<div class="clearfix"></div>
		<!-- auditorium bengin -->
		<section class="auditorium box mt15">
			<div class="section-title">
				<h3>大讲堂直播</h3>
			</div>
			<div class="section-list-warrp">
				<ul class="auditorium-section-list">
					<li>
						<a href="#">
							<img src="images/zhibo_11.png" alt="zhibo">
							<p class="list-title">WV旅游</p>
						</a>
						<div class="teacher-name">主讲：稻田</div>
					</li>
					<li>
						<a href="#">
							<img src="images/zhibo_11.png" alt="zhibo">
							<p class="list-title">WV旅游</p>
						</a>
						<div class="teacher-name">主讲：稻田</div>
					</li>
					<li>
						<a href="#">
							<img src="images/zhibo_11.png" alt="zhibo">
							<p class="list-title">WV旅游</p>
						</a>
						<div class="teacher-name">主讲：稻田</div>
					</li>
					<li>
						<a href="#">
							<img src="images/zhibo_11.png" alt="zhibo">
							<p class="list-title">WV旅游</p>
						</a>
						<div class="teacher-name">主讲：稻田</div>
					</li>
				</ul>
			</div>
		</section>
		<!-- auditorium end	 -->
		<div class="clearfix"></div>
		<!-- past class bengin -->
		<section class="past-class box mt15">
			<div class="section-title">
				<h3>往期课程</h3>
			</div>
			<div class="section-list-warrp" id="scroller-content">
				<ul class="class-list lists">
					<li class="class-item">
						<a href="">
							<div class="class-img">
								<img src="images/list.png" alt=""></div>
							<div class="class-info">
								<div class="class-info-title"><h3>用一年的时间，换一辈子精彩 拷贝</h3></div>
								<div class="class-info-cont"><p>11年传统旅游从业者为什么全力以赴... </p>
									<p class="list-teacher">主讲：王凯丽</p></div>
							</div>
						</a>
					</li>
					<li class="class-item">
						<a href="">
							<div class="class-img">
								<img src="images/list.png" alt=""></div>
							<div class="class-info">
								<div class="class-info-title"><h3>用一年的时间，换一辈子精彩 拷贝</h3></div>
								<div class="class-info-cont"><p>11年传统旅游从业者为什么全力以赴... </p>
									<p class="list-teacher">主讲：王凯丽</p></div>
							</div>
						</a>
					</li>
					<li class="class-item">
						<a href="">
							<div class="class-img">
								<img src="images/list.png" alt=""></div>
							<div class="class-info">
								<div class="class-info-title"><h3>用一年的时间，换一辈子精彩 拷贝</h3></div>
								<div class="class-info-cont"><p>11年传统旅游从业者为什么全力以赴... </p>
									<p class="list-teacher">主讲：王凯丽</p></div>
							</div>
						</a>
					</li>
					<li class="class-item">
						<a href="">
							<div class="class-img">
								<img src="images/list.png" alt=""></div>
							<div class="class-info">
								<div class="class-info-title"><h3>用一年的时间，换一辈子精彩 拷贝</h3></div>
								<div class="class-info-cont"><p>11年传统旅游从业者为什么全力以赴... </p>
									<p class="list-teacher">主讲：王凯丽</p></div>
							</div>
						</a>
					</li>
					<li class="class-item">
						<a href="">
							<div class="class-img">
								<img src="images/list.png" alt=""></div>
							<div class="class-info">
								<div class="class-info-title"><h3>用一年的时间，换一辈子精彩 拷贝</h3></div>
								<div class="class-info-cont"><p>11年传统旅游从业者为什么全力以赴... </p>
									<p class="list-teacher">主讲：王凯丽</p></div>
							</div>
						</a>
					</li>
					<li class="class-item">
						<a href="">
							<div class="class-img">
								<img src="images/list.png" alt=""></div>
							<div class="class-info">
								<div class="class-info-title"><h3>用一年的时间，换一辈子精彩 拷贝</h3></div>
								<div class="class-info-cont"><p>11年传统旅游从业者为什么全力以赴... </p>
									<p class="list-teacher">主讲：王凯丽</p></div>
							</div>
						</a>
					</li>
				</ul>
			</div>
		</section>
		<!-- <div class="class-add-more">上拉加载更多...</div> -->
		
		<!-- past class end -->
		<div class="clearfix"></div>
		<div style="height:74px;"></div>
		<!-- foot-bar bangin -->
		<section class="foot-bar box mt15">
			<div class="section-list-warrp">
				<ul class="foot-bar-list">
					<li class="foot-bar-item">
						<a href="">
							<i class="iconfont icon-mingpian"></i>
							<span class="foot-txt">名片</span>
						</a>
					</li>
					<li class="foot-bar-item">
						<i class="iconfont icon-qunzu"></i>
							<span class="foot-txt">名师</span>
						</a>
					</li>
					<li class="foot-bar-item active">
						<a href="">
							<i class="iconfont icon-shijian"></i>
							<span class="foot-txt">直播</span>
						</a>
					</li>
					<li class="foot-bar-item">
						<a href="">
							<i class="iconfont icon-eye"></i>
							<span class="foot-txt">往期</span>
						</a>
					</li>
					<li class="foot-bar-item">
						<a href="">
							<i class="iconfont icon-wancheng"></i>
							<span class="foot-txt">申请房间</span>
						</a>
					</li>
				</ul>
			</div>
		</section>
		</div>
	</div>
	<!-- page end -->


<script>
	$(function(){
    var counter = 0;
    // 每页展示4个
    var num = 4;
    var pageStart = 0,pageEnd = 0;

    // dropload
    $('#scroller-content').dropload({
        scrollArea : window,
        domDown : {
            domClass   : 'pullup',
            domRefresh : '<div class="dropload-refresh"><span class="pullUpIcon"></span><span class="pullUpLabel">上拉加载更多...</span></div>',
            domLoad    : '<div class="dropload-load"><span class="loading"></span>加载中-请稍后...</div>',
            domNoData  : '<div class="dropload-noData">暂无数据</div>'
        },
        loadDownFn : function(me){
        	console.log('data.json')
            $.ajax({
                type: 'GET',
                url: 'data.php',
                dataType: 'json',
                success: function(data){
                	console.log(data)
                    var result = '';
                    counter++;
                    pageEnd = num * counter;
                    pageStart = pageEnd - num;

                    for(var i = pageStart; i < pageEnd; i++){
                   		result += '<li class="class-item"><a href=""><div class="class-img"><img src="'+data.lists[i].imgSrc+'" alt=""></div><div class="class-info"><div class="class-info-title"><h3>'+ data.lists[i].title +'</h3></div><div class="class-info-cont"><p>'+ data.lists[i].content +'</p><p class="list-teacher">'+ data.lists[i].teacher +'</p></div></div></a></li>';
                       
                        if((i + 1) >= data.lists.length){
                            // 锁定
                            me.lock();
                            // 无数据
                            me.noData();
                            break;
                        }
                    }
                    console.log(result)
                    // 为了测试，延迟1秒加载
                    setTimeout(function(){
                        $(result).appendTo('.lists');
                        // 每次数据加载完，必须重置
                        me.resetload();
                    },1000);
                },
                error: function(xhr, type){
                    alert('Ajax error!');
                    console.log(xhr,type)
                    // 即使加载出错，也得重置
                    me.resetload();
                }
            });
        }
    });
});
</script>

</body>
</html>
